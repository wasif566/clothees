<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>Clothify â€” Home</title>

  <!-- FIXED PATHS -->
  <link rel="stylesheet" href="style.css"> 
  <link rel="stylesheet" href="home&products.css">
</head>

<body>
  <div class="container">
    <div id="siteHeader"></div>

    <main>
      <!-- HERO SECTION -->
      <section class="hero">
        <article class="hero-card">
          <img src="bodyimages/top 2.webp" alt="Exclusive Printed Fabric Suits">
          <div class="hero-meta">
            <h2>Exclusive Printed Fabric Suits</h2>
            <p>Beautiful printed unstitched suits crafted from high-quality fabric.</p>
          </div>

          <!-- FIXED PATH -->
          <button class="hero-cta" onclick="window.location.href='fabric'">
            Explore Fabric
          </button>
        </article>

        <article class="hero-card">
          <img src="bodyimages/top 1.png" alt="Trendy Printed Ready Wear Collection">
          <div class="hero-meta">
            <h2>Trendy Printed Ready Wear Collection</h2>
            <p>Ready-made printed suits with premium tailoring and stylish prints.</p>
          </div>

          <!-- FIXED PATH -->
          <button class="hero-cta" onclick="window.location.href='ready-wear'">
            Explore Ready Wear
          </button>
        </article>
      </section>

      <section>
        <div style="margin-top:28px">
          
          <div class="section-title"><h3>Premium Unstitched Prints</h3></div>
          <div id="unstitchedGrid" class="products"></div>

          <div class="section-title"><h3>Ready To Wear Collection</h3></div>
          <div id="productGrid" class="products"></div>
        </div>
      </section>
    </main>

    <!-- FIXED WHATSAPP BUTTON PATH -->
    <a id="whatsappContact" class="whatsapp-contact"
       href="https://wa.me/923148549885?text=Hello%2C%20I%27m%20interested%20to%20place%20an%20order.%20Please%20assist."
       role="button" aria-label="Contact us on WhatsApp"
       rel="noopener" target="_blank">

      <img src="bodyimages/download.png" alt="WhatsApp" width="48" height="48">
      <span class="whatsapp-label">Contact us</span>
    </a>

    <div id="siteFooter"></div>
  </div>

  <!-- FIXED JS PATHS -->
  <script src="load-partials.js"></script>
  <script src="site-search.js"></script>

  <!-- PRODUCT LOADER SCRIPT (UNCHANGED EXCEPT PATH FIXES) -->
  <script>
const STITCHED_JSON_PATH = 'stiched35.json';
const UNSTITCHED_JSON_PATH = 'unstitched35.json';
const STITCH_SHOW_COUNT = 8;
const UNSTITCH_SHOW_COUNT = 8;

function formatRs(n){ return 'Rs ' + Number(n).toLocaleString(); }
function escapeHtml(s){ return String(s ?? '').replaceAll('&','&amp;').replaceAll('<','&lt;').replaceAll('>','&gt;'); }

function shuffle(arr){
  for(let i = arr.length - 1; i > 0; i--){
    const j = Math.floor(Math.random() * (i + 1));
    [arr[i], arr[j]] = [arr[j], arr[i]];
  }
  return arr;
}

function idToNumber(id){
  const m = String(id).match(/(\d+)/);
  return m ? Number(m[1]) : 0;
}

function fetchProducts(path){
  return fetch(path).then(r => r.json())
  .catch(err => { console.error(err); return []; });
}

function renderProductsToGrid(items, gridId){
  const grid = document.getElementById(gridId);
  grid.innerHTML = '';

  items.forEach(p=>{
    const base = Number(p.originalPrice) || 0;
    const sale = Number(p.salePrice) || 0;

    const card = document.createElement('div');
    card.className = 'product';
    card.innerHTML = `
      <div class="prod-thumb" role="button">
        <img src="${escapeHtml(p.img)}" alt="${escapeHtml(p.title)}">
        ${p.percentBadge ? `<div class="badge-discount">${p.percentBadge}% OFF</div>` : ''}
      </div>

      <div class="prod-body">
        <div class="meta-row">
          <span>${escapeHtml(p.category)}</span>
          <span style="font-weight:700;color:var(--muted)">${escapeHtml(p.id)}</span>
        </div>

        <div class="title" style="cursor:pointer">${escapeHtml(p.title)}</div>
        <div class="desc">${escapeHtml(p.desc)}</div>

        <div class="price-block">
          ${base > sale ? `<div class="orig-price">${formatRs(base)}</div>` : ''}
          <div class="sale-price">${formatRs(sale)}</div>
        </div>
      </div>
    `;

    card.querySelector('.prod-thumb').addEventListener('click', () => {
      window.location.href = `product.html?id=${encodeURIComponent(p.id)}`;
    });

    grid.appendChild(card);
  });
}

function loadStitched(){
  fetchProducts(STITCHED_JSON_PATH).then(all=>{
    const chosen = shuffle(all).slice(0, STITCH_SHOW_COUNT);
    chosen.sort((a,b) => idToNumber(a.id) - idToNumber(b.id));
    renderProductsToGrid(chosen, 'productGrid');
  });
}

function loadUnstitched(){
  fetchProducts(UNSTITCHED_JSON_PATH).then(all=>{
    const chosen = shuffle(all).slice(0, UNSTITCH_SHOW_COUNT);
    chosen.sort((a,b) => idToNumber(a.id) - idToNumber(b.id));
    renderProductsToGrid(chosen, 'unstitchedGrid');
  });
}

document.addEventListener('DOMContentLoaded', ()=>{
  loadStitched();
  loadUnstitched();
});
  </script>

</body>
</html>
